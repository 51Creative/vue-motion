/*!
 * vue-motion v0.1.3
 * (c) 2017 Eduardo San Martin Morote
 * Released under the MIT License.
 */

!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(e.VueMotion=e.VueMotion||{})}(this,function(e){"use strict";function i(e,i,t,n,o,u,r){var s=-o*(i-n),c=-u*t,m=s+c,l=t+m*e,f=i+l*e;return Math.abs(l)<r&&Math.abs(f-n)<r?(a[0]=n,a[1]=0,a):(a[0]=f,a[1]=l,a)}function t(e,i,t){return 0===t&&e===i}function n(e){e.component("Motion",s)}var a=[0,0],o={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},u=window.requestAnimationFrame.bind(window),r=performance.now.bind(performance),s={data:function(){return{currentValue:0,currentVelocity:0}},props:{value:{type:Number},tag:{type:String,default:"span"},spring:{type:[Object,String],default:"noWobble"}},computed:{springConfig:function(){return"string"==typeof this.spring?o[this.spring]:this.spring}},render:function(e){return e(this.tag,[this.$scopedSlots.default({value:this.currentValue})])},watch:{value:function(e,i){e===i||this.wasAnimating||(this.prevTime=r(),this.accumulatedTime=0,this.animate())}},mounted:function(){this.currentValue=this.value,this.prevTime=r(),this.accumulatedTime=0,this.idealValue=this.currentValue,this.idealVelocity=this.currentVelocity,this.animate()},methods:{animate:function(){var e=this;this.animationId=u(function(){if(t(e.currentValue,e.value,e.currentVelocity))return e.wasAnimating&&e.$emit("motion-end"),e.animationId=null,void(e.wasAnimating=!1);e.wasAnimating||e.$emit("motion-start"),e.wasAnimating=!0;var n=r(),a=n-e.prevTime;if(e.prevTime=n,e.accumulatedTime+=a,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,e.$emit("motion-restart"),void e.animate();for(var o=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),u=Math.floor(e.accumulatedTime/(1e3/60)),s=e.idealValue,c=e.idealVelocity,m=0;m<u;m++){var l;l=i(1e3/60/1e3,s,c,e.value,e.springConfig.stiffness,e.springConfig.damping,e.springConfig.precision),s=l[0],c=l[1]}var f=i(1e3/60/1e3,s,c,e.value,e.springConfig.stiffness,e.springConfig.damping,e.springConfig.precision),d=f[0],p=f[1];e.currentValue=s+(d-s)*o,e.currentVelocity=c+(p-c)*o,e.idealValue=s,e.idealVelocity=c,e.animationID=null,e.accumulatedTime-=u*(1e3/60),e.animate()})}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(n);e.default=n,e.Motion=s,e.version="0.1.3",Object.defineProperty(e,"__esModule",{value:!0})});