/*!
 * vue-motion v0.1.4
 * (c) 2017 Eduardo San Martin Morote
 * Released under the MIT License.
 */

!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(e.VueMotion=e.VueMotion||{})}(this,function(e){"use strict";function i(e,i,t,n,r,s,u){var o=-r*(i-n),l=-s*t,c=o+l,m=t+c*e,f=i+m*e;return Math.abs(m)<u&&Math.abs(f-n)<u?(a[0]=n,a[1]=0,a):(a[0]=f,a[1]=m,a)}function t(e,i,t){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(0!==t[n])return!1;if(e[n]!==i[n])return!1}return!0}function n(e){e.component("Motion",o)}var a=[0,0],r={noWobble:{stiffness:170,damping:26,precision:.01},gentle:{stiffness:120,damping:14,precision:.01},wobbly:{stiffness:180,damping:12,precision:.01},stiff:{stiffness:210,damping:20,precision:.01}},s=window.requestAnimationFrame.bind(window),u=performance.now.bind(performance),o={data:function(){return{currentValues:null,currentVelocities:null}},props:{value:Number,values:[Object,Array],tag:{type:String,default:"span"},spring:{type:[Object,String],default:"noWobble"}},computed:{springConfig:function(){return"string"==typeof this.spring?r[this.spring]:this.spring},realValues:function(){return null!=this.value?{value:this.value}:this.values}},render:function(e){return e(this.tag,[this.$scopedSlots.default(this.currentValues)])},watch:{realValues:function(e,i){i===e||this.wasAnimating||(this.prevTime=u(),this.accumulatedTime=0,this.animate())}},created:function(){var e=this,i={},t={};for(var n in e.realValues)Object.prototype.hasOwnProperty.call(e.realValues,n)&&(i[n]=e.realValues[n],t[n]=0);this.currentValues=i,this.currentVelocities=t},mounted:function(){this.prevTime=u(),this.accumulatedTime=0,this.idealValues=Object.assign({},this.currentValues),this.idealVelocities=Object.assign({},this.currentVelocities),this.animate()},methods:{animate:function(){var e=this;this.animationId=s(function(){if(t(e.currentValues,e.realValues,e.currentVelocities))return e.wasAnimating&&e.$emit("motion-end"),e.animationId=null,void(e.wasAnimating=!1);e.wasAnimating||e.$emit("motion-start"),e.wasAnimating=!0;var n=u(),a=n-e.prevTime;if(e.prevTime=n,e.accumulatedTime+=a,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,e.$emit("motion-restart"),void e.animate();var r=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),s=Math.floor(e.accumulatedTime/(1e3/60));for(var o in e.realValues)if(Object.prototype.hasOwnProperty.call(e.realValues,o)){for(var l=e.idealValues[o],c=e.idealVelocities[o],m=e.realValues[o],f=e.springConfig,d=0;d<s;d++){var p;p=i(1e3/60/1e3,l,c,m,f.stiffness,f.damping,f.precision),l=p[0],c=p[1]}var h=i(1e3/60/1e3,l,c,m,f.stiffness,f.damping,f.precision),V=h[0],g=h[1];e.currentValues[o]=l+(V-l)*r,e.currentVelocities[o]=c+(g-c)*r,e.idealValues[o]=l,e.idealVelocities[o]=c}e.animationID=null,e.accumulatedTime-=s*(1e3/60),e.animate()})}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(n);e.default=n,e.Motion=o,e.version="0.1.4",Object.defineProperty(e,"__esModule",{value:!0})});